From 989803f11815a71e5cd564f7b0bc3fa616ffda05 Mon Sep 17 00:00:00 2001
From: Darren Shepherd <darren@rancher.com>
Date: Thu, 5 Sep 2019 08:47:06 -0700
Subject: [PATCH] Drop credential providers

---
 cmd/kubelet/app/options/globalflags.go | 5 -----
 cmd/kubelet/app/plugins.go             | 5 -----
 2 files changed, 10 deletions(-)

diff --git a/cmd/kubelet/app/options/globalflags.go b/cmd/kubelet/app/options/globalflags.go
index fdc20d18177..9ebf0d49430 100644
--- a/cmd/kubelet/app/options/globalflags.go
+++ b/cmd/kubelet/app/options/globalflags.go
@@ -28,10 +28,6 @@ import (
 	"k8s.io/component-base/logs"
 	"k8s.io/component-base/version/verflag"
 	"k8s.io/klog/v2"
-
-	// ensure libs have a chance to globally register their flags
-	_ "k8s.io/kubernetes/pkg/credentialprovider/azure"
-	_ "k8s.io/kubernetes/pkg/credentialprovider/gcp"
 )
 
 // AddGlobalFlags explicitly registers flags that libraries (glog, verflag, etc.) register
@@ -40,7 +36,6 @@ import (
 func AddGlobalFlags(fs *pflag.FlagSet) {
 	addKlogFlags(fs)
 	addCadvisorFlags(fs)
-	addCredentialProviderFlags(fs)
 	verflag.AddFlags(fs)
 	logs.AddFlags(fs)
 }
diff --git a/cmd/kubelet/app/plugins.go b/cmd/kubelet/app/plugins.go
index 372c0b2d614..e911226357d 100644
--- a/cmd/kubelet/app/plugins.go
+++ b/cmd/kubelet/app/plugins.go
@@ -18,11 +18,6 @@ package app
 
 // This file exists to force the desired plugin implementations to be linked.
 import (
-	// Credential providers
-	_ "k8s.io/kubernetes/pkg/credentialprovider/aws"
-	_ "k8s.io/kubernetes/pkg/credentialprovider/azure"
-	_ "k8s.io/kubernetes/pkg/credentialprovider/gcp"
-
 	"k8s.io/component-base/featuregate"
 	"k8s.io/utils/exec"
 
-- 
2.25.1

